"use strict";var playlist=["PLTwOhZBwOGY2-1ECyzNE2KDnwAe99OfPs","PLTwOhZBwOGY3FOR9dbRy5FOPr6Wa0tJs7","PLTwOhZBwOGY3TSz4dvJOODT47PVWoZ4WK","PLTwOhZBwOGY2T7Q7PGIDGtOnAxY3Nzwoc","PLTwOhZBwOGY2EIbBBboSs9LN4R3btEhz7","PLTwOhZBwOGY1XH68AIutqXzB6OGj57CJP","PLTwOhZBwOGY30haQRXnD1TFVnIiSsQ5CY"],$=function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?document.querySelectorAll(e):document.querySelector(e)},options={rootMargin:"0px",threshold:1},observer=new IntersectionObserver(function(e){for(var t=0;t<e.length;t++){var n=e[t].target;n.style.background="transparent no-repeat center",n.style.backgroundSize="cover",n.style.backgroundImage="url('"+e[t].target.getAttribute("v-img")+"')"}},options);function GET(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i="";return new Promise(function(s,a){var l=new XMLHttpRequest;if(l.onreadystatechange=function(){4==this.readyState&&200==this.status&&s(this.responseText)},n)i=JSON.stringify(t),l.open("GET",e,!0),l.setRequestHeader("Content-Type","application/json");else{for(var r in t)""!=i&&(i+="&"),i+=r+"="+encodeURIComponent(t[r]);l.open("GET",e+"?"+i,!0),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}o.map(function(e){l.setRequestHeader(e[0],e[1])}),l.send(i)})}function SelectPlaylist(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise(function(t,n){GET("https://www.googleapis.com/youtube/v3/playlistItems",{key:"AIzaSyCFKve5GbwICMo-SipNFgGWLTTN6U_GQzs",playlistId:e,part:"snippet, contentDetails"}).then(function(e){t(e)})})}function LoadAllVideo(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?null!=localStorage.getItem(new Date(Date.now()).toLocaleDateString().replace(/\//g,"-"))?localStorage.getItem(new Date(Date.now()).toLocaleDateString().replace(/\//g,"-")):new Promise(function(e,t){GET("https://www.googleapis.com/youtube/v3/playlistItems",{key:"AIzaSyCFKve5GbwICMo-SipNFgGWLTTN6U_GQzs",playlistId:playlist[playlist.length-1],part:"snippet, contentDetails"}).then(function(t){localStorage.setItem(new Date(Date.now()).toLocaleDateString().replace(/\//g,"-"),t),e(t)})}):new Promise(function(e,t){GET("https://www.googleapis.com/youtube/v3/playlistItems",{key:"AIzaSyCFKve5GbwICMo-SipNFgGWLTTN6U_GQzs",playlistId:playlist[playlist.length-1],part:"snippet, contentDetails"}).then(function(t){e(t)})})}function ChangeCreateVideo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Tout";$("main").innerHTML="";var t=playlist[0];switch(e.trim()){case"Tout":t=playlist[playlist.length-1];break;case"Stop motion":t=playlist[0];break;case"Autres":t=playlist[1];break;case"La voleuse":t=playlist[3];break;case"Course Poursuite":t=playlist[4];break;case"ISS":t=playlist[5]}SelectPlaylist(t,100).then(function(e){CreateVideoElements(JSON.parse(e).items)})}$("#blur").addEventListener("click",function(){$("#info-pop").style.display="none",$("#video-pop").style.display="none",$("#blur").style.display="none",$("#video-pop iframe").src="",$("#down").style.display="none"}),$("header button").addEventListener("click",function(){$("#down").style.display="block",$("#blur").style.display="block"});for(var _loop=function(e){$("#down li",!0)[e].addEventListener("click",function(){$("#down").style.display="none",$("#blur").style.display="none",ChangeCreateVideo($("#down li",!0)[e].innerText)})},posI=0;posI<$("#down li",!0).length;posI++)_loop(posI);function OpenVideo(e){$("#info-pop").style.display="none",$("#blur").style.display="block",$("#video-pop").style.display="block",$("#video-pop iframe").src="https://www.youtube.com/embed/"+e}function URLPlacer(e){var t=e.match(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi),n=e;return t.map(function(e){n=n.replace(e,'<a href="'+e+'" target="_BLANK">'+e+"</a>")}),n}function OpenInfo(e){$("#video-pop").style.display="none",$("#blur").style.display="block",$("#info-pop").style.display="block",$("#pop-img").src=e.getAttribute("v-img"),$("#pop-title").innerText=e.getAttribute("v-title");var t=e.getAttribute("v-desc");$("#pop-desc").innerHTML=URLPlacer(t),$("#pop-btn").setAttribute("v-id",e.getAttribute("v-id"))}function CreateVideoElements(e){e.map(function(e){var t=document.createElement("div"),n=!1,o=[];t.id=e.id,t.setAttribute("v-title",e.snippet.title),t.setAttribute("v-desc",e.snippet.description),t.setAttribute("v-img",e.snippet.thumbnails.high.url),t.setAttribute("v-date",e.snippet.publishedAt),t.setAttribute("v-id",e.snippet.resourceId.videoId),t.addEventListener("click",function(){OpenVideo(e.snippet.resourceId.videoId)}),t.addEventListener("contextmenu",function(e){e.preventDefault(),OpenInfo(t)}),t.addEventListener("touchstart",function(){n=!0,o=[]}),t.addEventListener("touchmove",function(e){n&&o.push(e.touches[0].clientX)}),t.addEventListener("touchend",function(){n=!1;var i=0,s=0,a=0;if(o.length>5){for(var l=0;l<o.length;l++)0==i&&0==s?(i=1,a=o[l]):(o[l]>a?i++:s++,a=o[l]);i>s&&OpenInfo(t)}else OpenVideo(e.snippet.resourceId.videoId)}),$("main").appendChild(t),observer.observe(t)})}$("#pop-btn").addEventListener("click",function(){OpenVideo($("#pop-btn").getAttribute("v-id"))}),document.addEventListener("DOMContentLoaded",function(){var e=LoadAllVideo(!0);e instanceof Promise?e.then(function(e){CreateVideoElements(JSON.parse(e).items)}):CreateVideoElements(JSON.parse(e).items)});
